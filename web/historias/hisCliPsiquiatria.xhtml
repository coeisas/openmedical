<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">  
    <h:head>
        <title>Usuarios</title>
        <link href="../recursos/css/estilos.css" rel="stylesheet"/>        
        <link href="../recursos/css/metro-bootstrap.css" rel="stylesheet"/>
        <link href="../recursos/css/iconFont.css" rel="stylesheet"/>  
        <script type="text/javascript" src="../recursos/js/calendario.js"></script> 
    </h:head>
    <h:body>
        <h:form id="IdFormRegistroClinico">  
            <p:growl id="IdMensajeUsuarios"  showDetail="true" sticky="false" autoUpdate="true" life="2000"/>
            <table style="margin-left: auto; margin-right: auto;" >
                <tr><td colspan="2"><h2>HISTORIA CLINICA PSIQUIATRIA</h2></td></tr>                
                <tr>
                    <td><p:outputLabel value="TIPO CONSULTA"/></td>
                    <td><p:outputLabel value="NUM. AUTORIZACION"/></td>
                </tr>
                <tr>
                    <td>
                        <p:focus for="IdFocus" />
                        <p:selectOneMenu id="IdFocus" style="width: 315px;" value="#{historiasMB.estructuraCampos.campo0}" filter="true" filterMatchMode="contains">           
                            <f:selectItems value="#{aplicacionGeneralMB.listaTipoConsulta}"/>
                        </p:selectOneMenu>
                    </td>
                    <td><p:inputText styleClass="width1" value="#{historiasMB.estructuraCampos.campo3}"/></td>
                </tr>
                <tr>
                    <td><p:outputLabel value="COLEGIO"/></td>
                    <td><p:outputLabel value="ESCOLARIDAD"/></td>
                </tr>
                <tr>
                    <td><p:inputText styleClass="width1" value="#{historiasMB.estructuraCampos.campo4}"/></td>
                    <td><p:inputText styleClass="width1" value="#{historiasMB.estructuraCampos.campo5}"/></td>
                </tr>                
                <tr>
                    <td><p:outputLabel value="NOMBRE MADRE"/></td>
                    <td><p:outputLabel value="NOMBRE PADRE"/></td>
                </tr>
                <tr>
                    <td><p:inputText styleClass="width1" value="#{historiasMB.estructuraCampos.campo6}"/></td>
                    <td><p:inputText styleClass="width1" value="#{historiasMB.estructuraCampos.campo7}"/></td>
                </tr>
                <tr>
                    <td colspan="2"><p:outputLabel value="ACOMPAÑANTE O ACUDIENTE"/></td>
                </tr>
                <tr>
                    <td colspan="2"><p:inputText styleClass="width2" value="#{historiasMB.estructuraCampos.campo8}"/></td>
                </tr>
                <tr>
                    <td colspan="2"><p:outputLabel value="LATERALIDAD" /></td>
                </tr>
                <tr>
                    <td colspan="2"><p:inputText  styleClass="width2" value="#{historiasMB.estructuraCampos.campo9}"  /></td>
                </tr>
                <tr>
                    <td colspan="2"><p:outputLabel value="MOTIVO CONSULTA" /></td>
                </tr>
                <tr>
                    <td colspan="2"><p:inputText  styleClass="width2" value="#{historiasMB.estructuraCampos.campo10}"  /></td>
                </tr>
                <tr>
                    <td colspan="2"><p:outputLabel value="ENFERMEDAD ACTUAL" /></td>
                </tr>
                <tr>
                    <td colspan="2"><p:inputText  styleClass="width2" value="#{historiasMB.estructuraCampos.campo11}"  /></td>
                </tr>
                <tr>
                    <td colspan="2"><p:outputLabel value="HISTORIA Y ANTECEDENTES FAMILIARES" /></td>
                </tr>
                <tr>
                    <td colspan="2"><p:inputText  styleClass="width2" value="#{historiasMB.estructuraCampos.campo12}"  /></td>
                </tr>
                <tr>
                    <td colspan="2"><h2>DESARROLLO PRENATAL</h2></td>
                </tr>
                <tr>
                    <td colspan="2"><p:inputText styleClass="width2" value="#{historiasMB.estructuraCampos.campo13}"/></td>
                </tr>
                <tr>
                    <td colspan="2"><h2>ANTECEDENTES POSTNATALES</h2></td>
                </tr>
                <tr>
                    <td colspan="2"><p:outputLabel value="MOTOR"/></td>
                </tr>    
                <tr>
                    <td colspan="2"><p:inputText styleClass="width2" value="#{historiasMB.estructuraCampos.campo14}"/></td>
                </tr>
                <tr>
                    <td colspan="2"><p:outputLabel value="LENGUAJE"/></td>
                </tr>    
                <tr>
                    <td colspan="2"><p:inputText styleClass="width2" value="#{historiasMB.estructuraCampos.campo15}"/></td>
                </tr>
                <tr>
                    <td colspan="2"><h2>ESCOLARIDAD</h2></td>
                </tr>
                <tr>
                    <td colspan="2"><p:outputLabel value="INICIO Y ADAPTACION"/></td>
                </tr>
                <tr>
                    <td colspan="2"><p:inputText styleClass="width2" value="#{historiasMB.estructuraCampos.campo16}"/></td>
                </tr>
                <tr>
                    <td colspan="2"><p:outputLabel value="SITUACION ESCOLAR ACTUAL"/></td>
                </tr>
                <tr>
                    <td colspan="2"><p:inputText styleClass="width2" value="#{historiasMB.estructuraCampos.campo17}"/></td>
                </tr>
                <tr>
                    <td colspan="2"><p:outputLabel value="CONDUCTA SOCIAL Y EMOCIONAL"/></td>
                </tr>
                <tr>
                    <td colspan="2"><p:inputText styleClass="width2" value="#{historiasMB.estructuraCampos.campo18}"/></td>
                </tr>
                <tr>
                    <td colspan="2"><h2>ANTECEDENTES</h2></td>
                </tr>
                <tr>
                    <td colspan="2"><p:outputLabel value="MEDICOS"/></td>
                </tr>
                <tr>
                    <td colspan="2"><p:inputText styleClass="width2" value="#{historiasMB.estructuraCampos.campo19}"/></td>
                </tr>
                <tr>
                    <td colspan="2"><p:outputLabel value="QUIRURGICOS"/></td>
                </tr>
                <tr>
                    <td colspan="2"><p:inputText styleClass="width2" value="#{historiasMB.estructuraCampos.campo20}"/></td>
                </tr>
                <tr>
                    <td colspan="2"><p:outputLabel value="TRANSFUNCIONALES"/></td>
                </tr>
                <tr>
                    <td colspan="2"><p:inputText styleClass="width2" value="#{historiasMB.estructuraCampos.campo21}"/></td>
                </tr>
                <tr>
                    <td colspan="2"><p:outputLabel value="INMUNOLOGICOS"/></td>
                </tr>
                <tr>
                    <td colspan="2"><p:inputText styleClass="width2" value="#{historiasMB.estructuraCampos.campo22}"/></td>
                </tr>
                <tr>
                    <td colspan="2"><p:outputLabel value="ALERGICOS"/></td>
                </tr>
                <tr>
                    <td colspan="2"><p:inputText styleClass="width2" value="#{historiasMB.estructuraCampos.campo23}"/></td>
                </tr>
                <tr>
                    <td colspan="2"><p:outputLabel value="TRAUMATICOS"/></td>
                </tr>
                <tr>
                    <td colspan="2"><p:inputText styleClass="width2" value="#{historiasMB.estructuraCampos.campo24}"/></td>
                </tr>
                <tr>
                    <td colspan="2"><p:outputLabel value="PSICOLOGICOS"/></td>
                </tr>
                <tr>
                    <td colspan="2"><p:inputText styleClass="width2" value="#{historiasMB.estructuraCampos.campo25}"/></td>
                </tr>
                <tr>
                    <td colspan="2"><p:outputLabel value="FARMACOLOGICOS"/></td>
                </tr>
                <tr>
                    <td colspan="2"><p:inputText styleClass="width2" value="#{historiasMB.estructuraCampos.campo26}"/></td>
                </tr>
                <tr>
                    <td colspan="2"><p:outputLabel value="FAMILIARES"/></td>
                </tr>
                <tr>
                    <td colspan="2"><p:inputText styleClass="width2" value="#{historiasMB.estructuraCampos.campo27}"/></td>
                </tr>
                <tr>
                    <td colspan="2"><p:outputLabel value="TOXICOS"/></td>
                </tr>
                <tr>
                    <td colspan="2"><p:inputText styleClass="width2" value="#{historiasMB.estructuraCampos.campo28}"/></td>
                </tr>
                <tr>
                    <td colspan="2"><p:outputLabel value="OTROS"/></td>
                </tr>
                <tr>
                    <td colspan="2"><p:inputText styleClass="width2" value="#{historiasMB.estructuraCampos.campo29}"/></td>
                </tr>
                <tr>
                    <td colspan="2"><h2>REVISION POR SISTEMA</h2></td>
                </tr>
                <tr>
                    <td colspan="2"><p:inputText styleClass="width2" value="#{historiasMB.estructuraCampos.campo30}"/></td>
                </tr>
                <tr>
                    <td colspan="2"><h2>EXAMEN FISICO</h2></td>
                </tr>
                <tr>
                    <td colspan="2">                 
                        <p:outputLabel styleClass="labelFormulario" value="T.A."/>                        
                        <p:inputText styleClass="campoFormulario width0" value="#{historiasMB.estructuraCampos.campo31}"/>
                        <p:outputLabel styleClass="labelFormulario" value="F.C."/>                        
                        <p:inputText styleClass="campoFormulario width0" value="#{historiasMB.estructuraCampos.campo32}"/>
                        <p:outputLabel styleClass="labelFormulario" value="F.R:"/>                        
                        <p:inputText styleClass="campoFormulario width0" value="#{historiasMB.estructuraCampos.campo33}"/>
                        <p:outputLabel styleClass="labelFormulario" value="TALLA"/>                        
                        <p:inputText styleClass="campoFormulario width0" value="#{historiasMB.estructuraCampos.campo34}"/>
                        <p:outputLabel styleClass="labelFormulario" value="PESO"/>                        
                        <p:inputText styleClass="campoFormulario width0" value="#{historiasMB.estructuraCampos.campo35}"/>
                    </td>
                </tr>
                <tr>
                    <td colspan="2"><p:outputLabel styleClass="labelFormulario width1" value="ESTADO GENERAL"/></td>
                </tr>
                <tr>
                    <td colspan="2"><p:inputText styleClass="width2" value="#{historiasMB.estructuraCampos.campo36}"/></td>
                </tr>
                <tr>
                    <td colspan="2">
                        <h2>
                            EXAMEN MENTAL
                            <p:commandButton 
                                styleClass="btnSizeForm" style="float: right;" 
                                actionListener="#{historiasMB.seleccionEditor('IdEditorExamenMental','37')}"
                                title="Abrir textos predefinidos" icon="ui-icon-folder-open" 
                                onclick="PF('dlgTextosPredefinidos').show();"/>
                        </h2>
                    </td>
                </tr>                
                <tr>
                    <td colspan="2">                        
                        <p:editor 
                            id="IdEditorExamenMental"  width="650"
                            value="#{historiasMB.estructuraCampos.campo37}"
                            controls="bold italic underline font size bullets numbering alignleft center alignright justify undo redo"/>
                    </td>
                </tr>
                <tr>
                    <td colspan="2"><h2>ANALISIS</h2></td>
                </tr>
                <tr>
                    <td colspan="2"><p:inputText styleClass="width2" value="#{historiasMB.estructuraCampos.campo38}"/></td>
                </tr>
                <p:outputPanel rendered="#{historiasMB.confidencialRender}">
                <tr>
                    <td colspan="2"><h2>CONFIDENCIAL</h2></td>
                </tr>
                <tr>
                    <td colspan="2"><p:inputTextarea styleClass="width2" value="#{historiasMB.estructuraCampos.campo47}"/></td>
                </tr>
                </p:outputPanel>
                <tr>
                    <td colspan="2"><h2>IMPRESION DIAGNOSTICA</h2></td>
                </tr>
                <tr>
                    <td colspan="2">
                        <p:outputLabel styleClass="labelFormulario" style="width: 182px;" value="DIAGNOSTICO PPAL"/>
                        <p:autoComplete size="86" value="#{historiasMB.estructuraCampos.campo39}" completeMethod="#{historiasMB.autocompletarDiagnostico}" forceSelection="true"/>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <p:outputLabel styleClass="labelFormulario" style="width: 182px;" value="DIAGNOSTICO RELACIONADO 1"/>
                        <p:autoComplete size="86" value="#{historiasMB.estructuraCampos.campo40}" completeMethod="#{historiasMB.autocompletarDiagnostico}" forceSelection="true"/>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <p:outputLabel styleClass="labelFormulario" style="width: 182px;" value="DIAGNOSTICO RELACIONADO 2"/>
                        <p:autoComplete size="86" value="#{historiasMB.estructuraCampos.campo41}" completeMethod="#{historiasMB.autocompletarDiagnostico}" forceSelection="true"/>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <p:outputLabel styleClass="labelFormulario" style="width: 182px;" value="DIAGNOSTICO RELACIONADO 3"/>
                        <p:autoComplete size="86" value="#{historiasMB.estructuraCampos.campo42}" completeMethod="#{historiasMB.autocompletarDiagnostico}" forceSelection="true"/>
                    </td>
                </tr>

                <tr>
                    <td colspan="2">
                        <p:outputLabel styleClass="labelFormulario" style="width: 182px;" value="TIPO DIAGNOSTICO CONSULTA"/>
                        <p:selectOneMenu style="width: 456px;" value="#{historiasMB.estructuraCampos.campo43}" filter="true" filterMatchMode="contains">
                            <f:selectItem itemLabel=""/>
                            <f:selectItems value="#{aplicacionGeneralMB.listaTipoDiagnosticoConsulta}"/>
                        </p:selectOneMenu>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <h2>
                            PLAN DE TRATAMIENTO
                            <p:commandButton 
                                styleClass="btnSizeForm" style="float: right;" 
                                actionListener="#{historiasMB.seleccionEditor('IdEditorPlanTratamiento','46')}"
                                title="Abrir textos predefinidos" icon="ui-icon-folder-open" 
                                onclick="PF('dlgTextosPredefinidos').show();"/>                            
                        </h2>

                    </td>
                </tr>
                <tr>
                    <td colspan="2">                        
                        <p:editor 
                            id="IdEditorPlanTratamiento" width="650"
                            value="#{historiasMB.estructuraCampos.campo46}"
                            controls="bold italic underline font size bullets numbering alignleft center alignright justify undo redo"/>
                    </td>
                </tr>
                <!-- tr>
                    <td>
                        <p:selectBooleanCheckbox styleClass="campoFormulario" value="# {historiasMB.estructuraCampos.campo44}"/>
                        <p:outputLabel styleClass="labelFormulario" value="FAMILIOGRAMA"/>                        
                    </td>
                    <td>
                        <p:selectBooleanCheckbox styleClass="campoFormulario" value="# {historiasMB.estructuraCampos.campo45}"/>
                        <p:outputLabel styleClass="labelFormulario" value="OBJETIVOS TERAPEUTICOS POR AREA"/>                        
                    </td>
                </tr -->
                <tr><td>&nbsp;</td></tr>
                <tr>
                    <td colspan="2">
                        <p:outputLabel value="FECHA-HORA REGISTRO "/>
                        <p:calendar navigator="true" locale="es" value="#{historiasMB.fechaReg}" pattern="dd/MM/yyyy HH:mm:ss" size="23" mask="true" disabled="#{historiasMB.posibleModificarFecha eq false}" />
                        <!--h:outputLabel value="# {historiasMB.fechaReg}">
                            <f:convertDateTime locale="es" pattern="dd/MM/yyyy HH:mm:ss" timeZone="America/Bogota"/>
                        </h:outputLabel-->
                    </td>
                </tr>
                <tr><td>&nbsp;</td></tr>
                <tr>
                    <td><p:outputLabel value="MEDICO"/></td>
                    <td><p:outputLabel value="ESPECIALIDAD"/></td>
                </tr>
                <tr>
                    <td>
                        <p:selectOneMenu style="width: 315px;" value="#{historiasMB.idPrestador}" filter="true" filterMatchMode="contains">                            
                            <p:ajax event="change" listener="#{historiasMB.cambiaMedico}" update="IdEspecialidad"/>
                            <f:selectItem itemLabel="" itemValue=""/>
                            <f:selectItems value="#{historiasMB.listaPrestadores}" var="p" itemLabel="#{p.primerNombre} #{p.segundoNombre} #{p.primerApellido} #{p.segundoApellido}" itemValue="#{p.idUsuario}"/>
                        </p:selectOneMenu>
                    </td>
                    <td><p:inputText id="IdEspecialidad" readonly="true" styleClass="width1" value="#{historiasMB.especialidadPrestador}"/></td>
                </tr>                
                <tr><td>&nbsp;</td></tr>
                <tr>
                    <td colspan="2">
                        <p:commandButton icon="ui-icon-disk" value="Guardar Nuevo Registro" actionListener="#{historiasMB.guardarRegistro}" disabled="#{historiasMB.modificandoRegCli}"/>
                        <p:commandButton icon="ui-icon-arrowthickstop-1-s" value="Actualizar Registro" actionListener="#{historiasMB.actualizarRegistro}" disabled="#{!historiasMB.modificandoRegCli}" rendered="#{loginMB.superUsuario}"/>
                        <p:commandButton icon="ui-icon-document" value="Limpiar Formulario" actionListener="#{historiasMB.cambiaTipoRegistroClinico}" update="IdFormRegistroClinico"/>
                    </td>
                </tr>
            </table>
            <p:dialog id="IdTextosDlgPredefinidos" header="TEXTOS PREDEFINIDOS" width="645" widgetVar="dlgTextosPredefinidos" resizable="false" closable="true" modal="true">                                
                <p:panelGrid styleClass="panelGridSinBordes" id="IdPanelTextosPredefinidos">
                    <p:row>
                        <p:column>
                            <p:outputLabel   styleClass="labelFormulario" style="width: 60px;" value="Categoría: "/>
                            <p:selectOneMenu styleClass="campoFormulario" style="width: 220px;" value="#{historiasMB.idMaestroTextoPredef}" >
                                <f:ajax event="change" listener="#{historiasMB.cambiaMaestro}" render="IdComboTextosPredefinidos IdEditorTextoPredefinido IdNombrePredefinido"/> 
                                <f:selectItem itemLabel="" itemValue=""/>
                                <f:selectItems value="#{historiasMB.listaMaestrosTxtPredefinidos}" var="maestro" itemValue="#{maestro.idMaestro}" itemLabel="#{maestro.nombre}"/>
                            </p:selectOneMenu>
                            <p:outputLabel   styleClass="labelFormulario" style="width: 60px;" value="Predefinidos: "/>
                            <p:selectOneMenu styleClass="campoFormulario" style="width: 220px;" id="IdComboTextosPredefinidos"  value="#{historiasMB.idTextoPredef}" >
                                <f:ajax 
                                    event="change"
                                    listener="#{historiasMB.cambiaTextoPredefinido}"                                                
                                    render="IdEditorTextoPredefinido IdNombrePredefinido"/>                                 
                                <f:selectItems value="#{historiasMB.listaTxtPredefinidos}" var="texto" itemValue="#{texto.idTxtPredefinido}" itemLabel="#{texto.nombre}"/>
                            </p:selectOneMenu>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column>
                            <p:outputLabel styleClass="labelFormulario" value="Nombre: " style="width: 60px;"/>
                            <p:inputText   styleClass="campoFormulario" id="IdNombrePredefinido" size="39" value="#{historiasMB.nombreTextoPredefinido}"/>                                                    
                            <p:commandButton icon="ui-icon-circle-arrow-s" title="Usar seleccionado"    actionListener="#{historiasMB.usarTextoPredefinido}"/>
                            <p:commandButton icon="ui-icon-disk"           title="Guardar/Actualizar"   actionListener="#{historiasMB.guardarTextoPredefinido}" />            
                            <p:commandButton icon="ui-icon-trash"          title="Eliminar predefinido" id="IdBtnEliminarPredefinido"/>                                        
                            <p:overlayPanel for="IdBtnEliminarPredefinido" widgetVar="opEliminarPredefinido">
                                <p:outputLabel   styleClass="labelFormulario" value="¿Confirma la eliminación?  "/>
                                <p:commandButton value="Si" title="Crear nueva categoría" actionListener="#{historiasMB.eliminarPredefinido}" oncomplete="PF('opEliminarPredefinido').hide();"/>                        
                            </p:overlayPanel> 
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column>
                            <p:editor id="IdEditorTextoPredefinido" value="#{historiasMB.detalleTextoPredef}" width="600" controls="bold italic underline font size bullets numbering alignleft center alignright justify undo redo"/>
                        </p:column>
                    </p:row>

                </p:panelGrid>             
            </p:dialog>
        </h:form>        
    </h:body>
</html>